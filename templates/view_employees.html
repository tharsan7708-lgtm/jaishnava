<!-- templates/view_employees.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jaishnava Designers</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="{{ url_for('static', filename='images/profile.png') }}" type="image/x-icon">
</head>
<body class="bg-gray-100 p-8">
  <div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">Employee List</h1>

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white shadow-md rounded-lg overflow-hidden">
        <thead class="bg-blue-600 text-white">
          <tr>
            <th class="px-6 py-3 text-left">Profile</th>
            <th class="px-6 py-3 text-left">Emp ID</th>
            <th class="px-6 py-3 text-left">Name</th>
            <th class="px-6 py-3 text-left">Gender</th>
            <th class="px-6 py-3 text-left">Job</th>
            <th class="px-6 py-3 text-left">Salary/Day</th>
            <th class="px-6 py-3 text-left">Date of Joining</th>
            <th class="px-6 py-3 text-left">Experience</th>
            <th class="px-6 py-3 text-left">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          {% for emp in employees %}
          <tr class="hover:bg-gray-100">
            <td class="px-6 py-4">
              {% if emp.profile_pic %}
                <img src="{{ url_for('static', filename='profile/' ~ emp.profile_pic) }}" alt="Profile" class="h-12 w-12 rounded-full object-cover">
              {% else %}
                <span class="text-gray-400 italic">No Image</span>
              {% endif %}
            </td>
            <td class="px-6 py-4">{{ emp.emp_id }}</td>
            <td class="px-6 py-4">{{ emp.name }}</td>
            <td class="px-6 py-4">{{ emp.gender }}</td>
            <td class="px-6 py-4">{{ emp.job }}</td>
            <td class="px-6 py-4">₹{{ emp.salary_per_day }}</td>
            <td class="px-6 py-4">{{ emp.dof }}</td>
            <td class="px-6 py-4">{{ emp.experience }}</td>
            <td class="px-6 py-4">
              <div class="flex flex-col md:flex-row gap-2">
                <!-- Edit Button -->
                <a href="{{ url_for('edit_employee', emp_id=emp.emp_id) }}"
                   class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500 text-sm text-center">
                  Edit
                </a>

                <!-- Remove Button -->
                <form action="{{ url_for('delete_employee', emp_id=emp.emp_id) }}" method="POST" 
                      onsubmit="return confirm('Are you sure you want to delete this employee?');">
                  <button type="submit"
                          class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 text-sm w-full">
                    Remove
                  </button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 gap-6 mt-10">
      <a href="/add_employee" class="bg-white shadow p-5 text-center rounded-xl hover:bg-blue-50">Add Employee</a>
    </div>

    <div class="text-center mt-6">
      <a href="{{ url_for('dashboard') }}" class="text-blue-600 hover:underline">← Back to Dashboard</a>
    </div>
  </div>
</body>
</html>
